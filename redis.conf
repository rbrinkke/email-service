# File: redis.conf
# Optimized Redis Configuration for Email

# Basic settings
port 6379
bind 0.0.0.0
protected-mode no

# Memory and persistence settings
maxmemory 2gb
maxmemory-policy allkeys-lru

# Persistence for email queue reliability
save 900 1
save 300 10
save 60 10000

# AOF for durability
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

# Networking
tcp-keepalive 300
timeout 0

# Performance optimizations
tcp-backlog 511
databases 16
stop-writes-on-bgsave-error yes

# Logging
loglevel notice
syslog-enabled yes
syslog-ident redis-email

# Security settings are already defined above

# Stream settings for email queues
stream-node-max-bytes 4096
stream-node-max-entries 100
